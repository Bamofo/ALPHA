<rom base="NISSAN_01">
    <romid>
	<xmlid>AQ806</xmlid>
	<hwid>1MATBH6D6</hwid>
      <internalidaddress>778a</internalidaddress>
      <internalidstring>AQ806</internalidstring>
      <ecuid>AQ806</ecuid>
      <year>02</year>
      <market>AUS</market>
      <make>Nissan</make>
      <model>Stagea</model>
      <submodel>FOUR V/RX FOUR</submodel>
      <transmission>AT</transmission>
      <memmodel>SH705507</memmodel>
      <flashmethod>nisprog</flashmethod>
      <filesize>512kb</filesize>
    </romid>


   <table name="Timing1" storageaddress="0x4e19">
      <table type="X Axis" storageaddress="0x7a68" />
      <table type="Y Axis" storageaddress="0x7a78" />
    </table>

    <table name="Timing Main Low Detonation" storageaddress="0x4f19">
      <table type="X Axis" storageaddress="0x7a68" />
      <table type="Y Axis" storageaddress="0x7a78" />
    </table>

    <table name="Timing High Detonation" storageaddress="0x5099">
      <table type="X Axis" storageaddress="0x7a68" />
      <table type="Y Axis" storageaddress="0x7a78" />
    </table>
	
	<table name="Fuel Compensation Cold" storageaddress="0x561d">
      <table type="X Axis" storageaddress="0x798d" />
      <table type="Y Axis" storageaddress="0x791d" />
    </table>

    <table name="Fuel Compensation" storageaddress="0x571d">
      <table type="X Axis" storageaddress="0x798d" />
      <table type="Y Axis" storageaddress="0x791d" />
    </table>

    <table name="Fuel Target 16x16" storageaddress="0x5aed">
      <table type="X Axis" storageaddress="0x7816" />
      <table type="Y Axis" storageaddress="0x78fd" />
    </table>

	<table name="Intake Cam Timing (16x16)" storageaddress="0x61bd">
      <table type="X Axis" storageaddress="0x8462" />
      <table type="Y Axis" storageaddress="0x8482" />
    </table>
    
	<table name="Rev Limit (Fuel Cut)" storageaddress="0x4a40">
	</table>

	<table name="No Load Rev Limit (Fuel Cut)" storageaddress="0x4a44">
	</table>
	
	<table name="Speed Limiter (km/h)" storageaddress="0x4ac0" />
	
	<table name="Torque Management" storageaddress="0x71f8">
	<table type="X Axis" storageaddress="0x7816" />
      <table type="Y Axis" storageaddress="0x78fd" />
    </table>
	
	<table name="Throttle Open" storageaddress="0x6978">
	<table type="X Axis" storageaddress="0x87ee" />
	<table type="Y Axis" storageaddress="0x793d" />
</table>

<table name="Throttle Open 2" storageaddress="0x9840">
	<table type="Y Axis" storageaddress="0x9afe" />
	<table type="X Axis" storageaddress="0x9b8e" />
</table>
	
	
	
	<table name="MAF" storageaddress="0x880e">
	</table>

<table name="Load Base Fuel Schedule" storageaddress="0x8a9e">
	</table>

<!-- The following section is some very experimental, *tentative definitions* for parameters of unknown use. Scaling, naming, units and output type need to be verified -->
<!-- fenugrec 2017 -->

<table type="2D" name="Unknown thresholds 1" category="Misc" storagetype="uint8" endian="big" sizey="2" userlevel="4" storageaddress="0x438e">
	<scaling units="" expression="x" to_byte="x" format="0" fineincrement="1" coarseincrement="10" />
	<table type="Static Y Axis" name="unknown_8bit" sizey="2">
		<data>Lower</data>
		<data>Upper</data>
	</table>
	<description>Unknown threshold values</description>
</table>

<table type="2D" name="Unknown thresholds 1b" category="Misc" storagetype="uint8" endian="big" sizey="1" userlevel="4" storageaddress="0x46d8">
	<scaling units="" expression="x" to_byte="x" format="0" fineincrement="1" coarseincrement="10" />
	<table type="Static Y Axis" name="unknown_8bit" sizey="2">
		<data>Thresh</data>
	</table>
	<description>Unknown threshold value, related to "Unknown thresholds 1"</description>
</table>

<table type="2D" name="Unknown thresholds 1c" category="Misc" storagetype="uint8" endian="big" sizey="1" userlevel="4" storageaddress="0x46e6">
	<scaling units="" expression="x" to_byte="x" format="0" fineincrement="1" coarseincrement="10" />
	<table type="Static Y Axis" name="unknown_8bit" sizey="2">
		<data>Thresh</data>
	</table>
	<description>Unknown threshold value, related to "Unknown thresholds 1"</description>
</table>


<table type="3D" name="Unknown 16x16 1" category="Misc" storagetype="uint16" endian="big" sizex="16" sizey="16" userlevel="4" logparam="?">
	<!-- the +/- 32768 offset here is just to nicen the display -->
	<scaling units="Unknown" expression="x-32768" to_byte="x+32768" format="0" fineincrement="1" coarseincrement="10" />
	<table type="X Axis" name="Unknown u16" storagetype="uint16" endian="big" logparam="?">
		<scaling units="??" expression="x/655.35" to_byte="x*655.35" format="0.00" fineincrement="10" coarseincrement="100" />
	</table>
	<table type="Y Axis" name="?" storagetype="uint8" endian="big" logparam="?">
		<!-- ECU actually scales *16 internally for calculations, so the */ 50 here is most likely inappropriate -->
		<scaling units="??" expression="x*50" to_byte="x/50" format="0" fineincrement="1" coarseincrement="10" />
	</table>
	<description>X axis headers go from 0 to 0xFFFF. Y from 0 to 0x78, but is scaled *16 in the code, so the similarity to RPM is not solid. This does however remind of the "throttle open" table on other ROMs</description>
</table>

<table name="Unknown 16x16 1" storageaddress="0x6978">
	<table type="X Axis" storageaddress="0x87ee" />
	<table type="Y Axis" storageaddress="0x793d" />
</table>


<table name="Fuel Injection Multiplier" storageaddress="0x49de" />

<!-- End of very-experimental defs -->

<checksum type="std" start="0" end="0x7FFFF" sumloc="0x4ccc" xorloc="0x4cb8" />

</rom>
